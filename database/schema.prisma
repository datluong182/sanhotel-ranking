datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model tbHotel {
  id       String     @id @default(uuid())
  name     String
  address  String
  avatar   String?
  gm       String
  links    Json
  tbObject tbObject[]
}

model tbObject {
  id                String        @id @default(uuid())
  name              String
  url               String
  score             Float
  numberScoreReview Int[]
  updatedAt         DateTime
  extra             Json
  platform          PLATFORM
  tbObjectLog       tbObjectLog[]
  tbHotel           tbHotel       @relation(fields: [tbHotelId], references: [id], onDelete: Cascade)
  tbHotelId         String
}

enum PLATFORM {
  TRIP
  BOOKING
  GOOGLE
  EXPEDIA
}

model tbObjectLog {
  id                String   @id @default(uuid())
  name              String
  url               String
  score             Float
  numberScoreReview Int[]
  updatedAt         DateTime
  extra             Json
  platform          PLATFORM
  isManual          Boolean
  messages          String[]
  tbObject          tbObject @relation(fields: [tbObjectId], references: [id], onDelete: Cascade)
  tbObjectId        String
}

model tbLastUpdate {
  id        String   @id @default(uuid())
  platform  PLATFORM
  updatedAt DateTime
  isManual  Boolean
}

model tbResponse {
  id       String            @id @default(uuid())
  name     String
  value    Float
  color    String
  platform PLATFORM_RESPONSE
}

enum PLATFORM_RESPONSE {
  BOOKING
  HUBSPOT
}
